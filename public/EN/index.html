<!DOCTYPE html>
<html>
<title>Madrid For All</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU"
  crossorigin="anonymous">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins">
<!-- link to the favicon genereated at https://www.favicon-generator.org/ -->
<link rel="shortcut icon" href="../assets/favicon.ico" type="image/x-icon">
<link rel="icon" href="../assets/favicon.ico" type="image/x-icon">
<!-- include necessary 3rd party javascript libraries -->
<script src="https://www.w3schools.com/lib/w3.js"></script>
<script src="https://cdn.jsdelivr.net/npm/pouchdb@7.0.0/dist/pouchdb.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/pouchdb@7.0.0/dist/pouchdb.find.min.js"></script>
<script src="../js/madrid4all.js"></script>
<script>
    var selectedLanguage = 'EN';
</script>
<style>
  body,
  h1,
  h2,
  h3,
  h4,
  h5 {
    font-family: "Poppins", sans-serif
  }

  body {
    font-size: 16px;
  }

  .w3-half img {
    margin-bottom: -6px;
    margin-top: 16px;
    opacity: 0.8;
    cursor: pointer
  }

  .w3-half img:hover {
    opacity: 1
  }
</style>

<body>

  <div w3-include-html="../menu.html"></div>

  <!-- !PAGE CONTENT! -->
  <div class="w3-main" style="margin-left:390px;margin-right:40px">

    <!-- Header -->
    <!-- Servicios -->
    <div class="w3-container" style="margin-top:20px">
        <div class="w3-row w3-margin-bottom">
            <div class="w3-col s12 m11 l11 w3-left">
                <img src="../assets/madrid_for_all_header.png" alt="Madrid for all" class="w3-image" style="width:100%;max-width:600px">
                <div class="w3-hide-small">
                    <hr style="width:700px;border:3px solid #F2323E" class="w3-round">
                </div>
                <p>Select a category or service to see where it is located and how you can reach it</p>
            </div>
            <div class="w3-col s11 m2 l1 w3-right">
                <a href="../index.html" onClick="onLanguageChange('ES')">ES</a>
                <a href="../EN/index.html" onClick="onLanguageChange('EN')">EN</a>
                <a href="../FR/index.html" onClick="onLanguageChange('FR')">FR</a>
                <!--a href="./AR/index.html" onClick="onLanguageChange('AR')">AR</a-->
            </div>
    </div>

    <br>

    <div class="w3-container">
      <div id="servicesMap" style="width:100%;height:600px;"></div>
      <br>
      <div id="searchResults">
        <div id="resultCounter"></div>
        <table id="resultTable" class="w3-table w3-striped w3-bordered">
          <thead>
            <tr>
              <th onclick="w3.sortHTML('#resultTable','.item', 'td:nth-child(1)')"></th>
            </tr>
          </thead>
          <tr w3-repeat="records" class="item">
            <td>
              <div class="w3-row">
                <button id="loc-{{ID}}" onclick="onLocationClick('{{ID}}')" class="w3-button w3-col s11 m10 l10 w3-left w3-block w3-medium w3-left-align">{{orgName}}</button>
                <a href="javascript:void(0)" class="w3-col w3-hide-small m2 l2 w3-padding w3-right-align" onClick="showLocationMarker('loc-marker-{{ID}}')">Show in map</a>
                <a href="javascript:void(0)" class="w3-col w3-hide-large w3-hide-medium s1 w3-right-align" onClick="showLocationMarker('loc-marker-{{ID}}')">+</a>
              </div>
              <div id="loc-{{ID}}-details" class="w3-hide loc-details">
                <div class="w3-row">
                  <a href="javascript:void(0)" onclick="openInfoTab('general-info-{{ID}}');">
                    <div id="general-info-{{ID}}-tablink" class="w3-col s12 m4 l4 tablink w3-bottombar w3-padding">General</div>
                  </a>
                  <a href="javascript:void(0)" onclick="openInfoTab('contact-info-{{ID}}');">
                    <div id="contact-info-{{ID}}-tablink" class="w3-col s12 m4 l4 tablink w3-bottombar w3-padding">Contacto y horarios</div>
                  </a>
                  <a href="javascript:void(0)" onclick="openInfoTab('extra-info-{{ID}}');">
                    <div id="extra-info-{{ID}}-tablink" class="w3-col s12 m4 l4 tablink w3-bottombar w3-padding">Informaci√≥n adicional</div>
                  </a>
                </div>
                <div class="w3-row">
                  <div id="general-info-{{ID}}" class="w3-col s12 m4 l4 infoTab" style="display:none">
                    <p>District: {{district}}</p>
                    <p>Categories: {{categories}}</p>
                    <p>Services: {{services}}</p>
                  </div>
                  <div id="contact-info-{{ID}}" class="w3-col s12 m4 l4 infoTab" style="display:none">
                    <p>Address: {{fullAddress}}</p>
                    <p>Prefered ways of contact: {{waysOfContact}}</p>
                    <p>Opening hours: {{timeTable}}</p>
                  </div>
                  <div id="extra-info-{{ID}}" class="w3-col s12 m4 l4 infoTab" style="display:none">
                    <p>{{additionalInfo}}</p>
                  </div>
                </div> 
              </div>
          </td>
          </tr>
          </table>
      </div>
    </div>

    <!-- Pagination 
    <div class="w3-center">
      <div class="w3-bar">
        <a href="#" class="w3-bar-item w3-button">&laquo;</a>
        <a href="#" class="w3-button">1</a>
        <a href="#" class="w3-button">2</a>
        <a href="#" class="w3-button">3</a>
        <a href="#" class="w3-button">4</a>
        <a href="#" class="w3-button">&raquo;</a>
      </div>
    </div>
    -->
  </div>
  <!-- End page content / w3-main -->
  <!-- Footer -->
  <div w3-include-html="./footer.html"></div>

  <script>
    // destroy DB in order to recreate it from scratch
    db.destroy().then(
      function () {
        // Once we destroy the database, we have to create a new one otherwise we'll get an error, "Error: database is destroyed".
        db = new PouchDB(dbName);
        // initialize page content by loading its associated 'data.js'
        w3.getHttpObject("/data/locations.json", initPageContent);
        w3.getHttpObject("/data/categories.json", initMenuContent);
      }
    )
    // Post DOM loaded actions
    // include the HTML in separated files
    w3.includeHTML();
    // sort results table by column #1
    w3.sortHTML('#resultTable', '.item', 'td:nth-child(1)')
  </script>
  <!-- async load / call external js scripts -->
  <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA-cYGCy5xyn4C5hH0rv7iWbw4nNGqcU0E&callback=loadMap"></script>

</body>

</html>