<!DOCTYPE html>
<html>
<title>Lost In Madrid</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU"
  crossorigin="anonymous">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins">
<script src="https://www.w3schools.com/lib/w3.js"></script>
<style>
  body,
  h1,
  h2,
  h3,
  h4,
  h5 {
    font-family: "Poppins", sans-serif
  }

  body {
    font-size: 16px;
  }

  .w3-half img {
    margin-bottom: -6px;
    margin-top: 16px;
    opacity: 0.8;
    cursor: pointer
  }

  .w3-half img:hover {
    opacity: 1
  }
</style>

<body>

  <!-- Include sidebar / menu in small screens -->
  <div w3-include-html="./menu.html"></div>

  <script>
    w3.includeHTML();
  </script>

  <!-- !PAGE CONTENT! -->
  <div class="w3-main" style="margin-left:340px;margin-right:40px">

    <!-- Header -->
    <!-- Servicios -->
    <div class="w3-container" style="margin-top:80px" id="showcase">
      <h1 class="w3-jumbo"><b>Lost in Madrid</b></h1>
      <h1 class="w3-xxxlarge w3-text-green"><b>Servicios.</b></h1>
      <hr style="width:50px;border:5px solid green" class="w3-round">
      <p>We are a interior design service that focus on what's best for your home and what's best for you!</p>
      <p>Some text about our services - what we do and what we offer. We are lorem ipsum consectetur adipiscing elit,
        sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud
        exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure
        dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat
        cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum consectetur adipiscing
        elit, sed do eiusmod tempor
        incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris
        nisi ut aliquip ex ea commodo consequat.
      </p>
    </div>

    <div id="servicesMap" style="width:100%;height:800px;"></div>

    <!-- End page content -->
  </div>

  <!-- Footer -->
  <div class="w3-container w3-light-grey w3-padding-32" style="margin-top:75px;padding-right:58px">
    <p class="w3-right">Powegreen by <a href="https://www.w3schools.com/w3css/default.asp" title="W3.CSS" target="_blank"
        class="w3-hover-opacity">w3.css</a></p>
  </div>

  <script>
    // Script to open and close sidebar
    function w3_open() {
      document.getElementById("mySidebar").style.display = "block";
      document.getElementById("myOverlay").style.display = "block";
    }

    function w3_close() {
      document.getElementById("mySidebar").style.display = "none";
      document.getElementById("myOverlay").style.display = "none";
    }

    // Modal Image Gallery
    function onClick(element) {
      document.getElementById("img01").src = element.src;
      document.getElementById("modal01").style.display = "block";
      var captionText = document.getElementById("caption");
      captionText.innerHTML = element.alt;
    }

    // Read instructions here: https://codepen.io/KryptoniteDove/post/load-json-file-locally-using-pure-javascript
    function loadJSON(callback) {
      var xobj = new XMLHttpRequest();
      xobj.overrideMimeType("application/json");
      xobj.open('GET', './data/lostinmadrid_data.json', true); // Replace 'my_data' with the path to your file
      xobj.onreadystatechange = function () {
        if (xobj.readyState == 4 && xobj.status == "200") {
          // Required use of an anonymous callback as .open will NOT return a value but simply returns undefined in asynchronous mode
          callback(xobj.responseText);
        }
      };
      xobj.send(null);
    }

    var geocoder;
    var map;

    // Function to Show Map of Services
    function loadMap() {

      // initialize elements
      geocoder = new google.maps.Geocoder();

      var mapCanvas = document.getElementById("servicesMap");
      // mapPosition centered in 'Madrid'
      var mapPosition = { lat: 40.416775, lng: -3.703790 };
      var mapOptions = {
        // create map centered in mapPosition
        center: mapPosition,
        zoom: 11
      };

      map = new google.maps.Map(mapCanvas, mapOptions);
      map.setCenter({ lat: 40.416775, lng: -3.703790 });

      // we call loadJSON parsing the code to display the map as an asynchronous callback
      loadJSON(function (response) {
        // load the markers in the json file
        var markersData = JSON.parse(response);
        var i;
        for (i = 0; i < markersData.length; i++) {
          // add the markers to the map
          addMarker(markersData[i])
        }
      });
    }

    // Adds a marker to a map.
    function addMarker(markerData) {
      var address = markerData.Address;
      var sublocality = markerData.District;
      var markerTitle = markerData.OrgName;
      geocoder.geocode({ 'address': address }, function (results, status) {
        if (status == 'OK') {
          map.setCenter(results[0].geometry.location);
          // add the marker to the map
          var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location,
            title: markerTitle
          });
        } else {
          console.log('Geocode was not successful for the following reason: ' + status);
        }
      });
    }

  </script>

  <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA-cYGCy5xyn4C5hH0rv7iWbw4nNGqcU0E&callback=loadMap"></script>

</body>

</html>